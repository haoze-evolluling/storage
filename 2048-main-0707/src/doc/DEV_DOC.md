# 2048 游戏开发文档

本文档详细说明了 2048 游戏的设计和实现，该游戏使用 HTML、CSS 和 JavaScript 构建，具有蓝色和白色的科技感界面。

## 1. 项目结构

项目将包含以下文件：

```
/
|-- index.html       # 游戏主页面，包含所有 HTML 元素
|-- style.css        # 游戏的样式表，负责界面美观和动画效果
|-- main.js          # 游戏的核心逻辑
|-- DEV_DOC.md       # 开发文档 (本文档)
```

## 2. 设计理念

### 2.1. 视觉设计

*   **配色方案**: 以蓝色和白色为主色调，营造出简洁、现代的科技感。
    *   **背景**: 浅灰色或白色背景。
    *   **游戏板**: 深蓝色边框或背景。
    *   **方块**: 不同深浅的蓝色来区分不同的数字，数字本身使用白色以保证清晰可读。
    *   **按钮和文本**: 使用蓝色和白色搭配，保持整体风格统一。
*   **字体**: 选择一款清晰、现代的无衬线字体（如 'Arial', 'Helvetica', 'sans-serif'）。
*   **动画**: 方块的移动和合并将伴有平滑的 CSS 过渡动画，提升用户体验。

### 2.2. 用户界面 (UI)

*   **游戏板**: 一个 4x4 的网格，是游戏的核心区域。
*   **分数显示**: 在游戏板上方清晰地显示当前分数和最高分数。
*   **控制**: 玩家通过键盘的箭头键（上、下、左、右）来控制方块的移动。
*   **游戏状态**:
    *   **新游戏按钮**: 允许玩家随时重新开始一局新游戏。
    *   **游戏结束**: 当游戏板被填满且无法进行任何有效移动时，会弹出一个覆盖层，显示“游戏结束”信息和最终分数。

## 3. 核心功能实现 (JavaScript)

`main.js` 文件将包含游戏的所有逻辑。

### 3.1. 主要变量和常量

*   `grid`: 一个二维数组（4x4），用于在逻辑上表示游戏板的状态。
*   `score`: 存储当前游戏分数。
*   `bestScore`: 存储历史最高分（将使用 `localStorage` 进行持久化）。
*   `isGameOver`: 一个布尔值，用于标记游戏是否结束。

### 3.2. 核心函数

*   **`initializeGame()`**:
    *   重置 `grid` 为空。
    *   重置 `score` 为 0。
    *   在网格的两个随机空位置生成初始的方块（值为 2 或 4）。
    *   更新前端 UI 显示。

*   **`handleKeyPress(event)`**:
    *   监听键盘的 `ArrowUp`, `ArrowDown`, `ArrowLeft`, `ArrowRight` 事件。
    *   根据按键方向调用相应的移动函数（如 `moveUp()`）。
    *   在每次有效移动后，在随机空位生成一个新的方块并更新 UI。
    *   检查游戏是否结束。

*   **移动与合并逻辑 (例如 `moveLeft()`**):
    1.  遍历每一行。
    2.  对于每一行，创建一个新的数组，只包含非零的方块。
    3.  遍历新数组，如果相邻的方块数字相同，则将它们合并（值相加），并更新分数。
    4.  将合并后的行更新回 `grid`，空位用 0 填充。
    5.  比较移动前后的 `grid` 状态，判断本次移动是否有效。

*   **`generateNewTile()`**:
    *   在所有值为 0 的位置中随机选择一个。
    *   随机生成一个 2（90% 概率）或 4（10% 概率）的方块。

*   **`updateUI()`**:
    *   遍历 `grid` 数组。
    *   根据数组中的值动态创建或更新 HTML 元素来渲染游戏板。
    *   为不同的数字方块应用不同的 CSS 类（以实现不同的颜色）。
    *   更新分数和最高分数的显示。

*   **`checkGameOver()`**:
    *   检查 `grid` 中是否还有空位（值为 0）。
    *   如果没有空位，则检查水平和垂直方向上是否还有可以合并的相邻方块。
    *   如果以上两个条件都不满足，则设置 `isGameOver = true` 并显示游戏结束界面。

*   **`saveBestScore()` / `loadBestScore()`**:
    *   使用 `localStorage.setItem()` 和 `localStorage.getItem()` 来保存和读取最高分。

## 4. 如何运行游戏

1.  将 `index.html`, `style.css`, 和 `main.js` 文件放在同一个文件夹中。
2.  用现代浏览器（如 Chrome, Firefox, Edge）打开 `index.html` 文件。
3.  游戏将自动开始，使用箭头键进行游戏。
